{
  "comments": [
    {
      "key": {
        "uuid": "AAAAr3//++k\u003d",
        "filename": "libcore/x-net/src/main/java/org/apache/harmony/xnet/provider/jsse/OpenSSLSessionImpl.java",
        "patchSetId": 1
      },
      "lineNbr": 519,
      "author": {
        "id": 1003224
      },
      "writtenOn": "2010-01-30T18:24:46Z",
      "side": 0,
      "message": "note that this is OpenSSLSocketImpl, not OpenSSLSessionImpl; it\u0027s trying to ensure mutual exclusion with native method calls made in the *other* class.\n\ni already have an internal bug to look into this, but i\u0027m still not certain that the mutual exclusion isn\u0027t necessary. (my bug suggests we look into synchronizing on instances instead... you\u0027d imagine we only need to ensure that the two classes aren\u0027t both mutating the same OpenSSLSessionImpl at the same time [Socket has-a Session].)",
      "revId": "0c9612f9d7ff9fc0a61cc9eeb37acaabb7b28700",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAr3//+8g\u003d",
        "filename": "libcore/x-net/src/main/java/org/apache/harmony/xnet/provider/jsse/OpenSSLSessionImpl.java",
        "patchSetId": 1
      },
      "lineNbr": 519,
      "author": {
        "id": 1002951
      },
      "writtenOn": "2010-02-01T07:44:32Z",
      "side": 0,
      "message": "We recognize that it is synchronizing on the OpenSSLSocketImpl.class. Synchronizing on some other class in a finalizer is a bit scary as it easily leads to dead locks.\nSynchronizing on the instance makes much more sense. OTOH synchronizing on the OpenSocketImpl instance is not necessary as the socket-has-a-session. Whenever the socket instance lives the session instance lives and cannot be garbage. Right?",
      "parentUuid": "AAAAr3//++k\u003d",
      "revId": "0c9612f9d7ff9fc0a61cc9eeb37acaabb7b28700",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    },
    {
      "key": {
        "uuid": "AAAAx3///rI\u003d",
        "filename": "libcore/x-net/src/main/java/org/apache/harmony/xnet/provider/jsse/OpenSSLSessionImpl.java",
        "patchSetId": 1
      },
      "lineNbr": 519,
      "author": {
        "id": 1003723
      },
      "writtenOn": "2010-04-28T17:48:06Z",
      "side": 0,
      "message": "I investigating removing this by first looking at why it was added. It turns out there is a reproducible native crash related to the improper sharing of native SSL_SESSIONs between unrelated SSL_CTXs. It wasn\u0027t quite understood at the time but this locking prevented the crash. In order to remove the locking, the OpenSSL native code has to be fixed as well. This is active work in progress.",
      "parentUuid": "AAAAr3//+8g\u003d",
      "revId": "0c9612f9d7ff9fc0a61cc9eeb37acaabb7b28700",
      "serverId": "85c56323-6fa9-3386-8a01-6480fb634889",
      "unresolved": false
    }
  ]
}